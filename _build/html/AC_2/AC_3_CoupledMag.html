
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Mutual Inductance and SPICE &#8212; Python &amp; SPICE</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What is PZ anylsis" href="AC_4_PZ.html" />
    <link rel="prev" title="Basic Passive Filters" href="AC_2_RCL_filters.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  
  <h1 class="site-logo" id="site-title">Python & SPICE</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../needed_libraries.html">
   Dependency install instruction
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../DC_1/DC_1.html">
   Chapter 1 DC Simulations and Basic DC Elements with Python and SPICE
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_1_op_ohm.html">
     Getting started with Python &amp; SPICE, DC Operating Point Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_1_op_ohm.html#spice-s-dc-operating-point-simulation-op">
     SPICE’s DC Operating Point simulation
     <code class="docutils literal notranslate">
      <span class="pre">
       .op
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_2_op_source_transform.html">
     Working with SKiDl elements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_3_PracticalSourcs_sweeps_subcirucirts.html">
     DC Sweeps
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_3_PracticalSourcs_sweeps_subcirucirts.html#dc-load-sweep-of-an-ideal-voltage-source">
     DC load sweep of an Ideal Voltage source
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_3_PracticalSourcs_sweeps_subcirucirts.html#a-better-dc-sim-interaction">
     A Better
     <code class="docutils literal notranslate">
      <span class="pre">
       .dc
      </span>
     </code>
     Sim Interaction¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_3_PracticalSourcs_sweeps_subcirucirts.html#ideal-current-source">
     Ideal Current Source¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_3_PracticalSourcs_sweeps_subcirucirts.html#first-testbench-element">
     First testbench element¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html">
     Controlled Dependent Sources in SPICE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html#ccvs">
     CCVS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html#enter-the-spice-transfer-function">
     Enter the SPICE transfer function
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html#lcapy">
     LCAPY
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html#vcvs">
     VCVS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html#cccs">
     CCCS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_4_dependent_sources_and_tf.html#vccs">
     VCCS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_5_Thvenin_Norton.html">
     Thevenin’s DC Equivalent Circuit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_5_Thvenin_Norton.html#norton-s-theorem">
     Norton’s Theorem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DC_1/DC_6_DC_MaxPower_MaxEfficiency.html">
     Maximum Power Transfer Theorem
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="AC_1.html">
   Chapter 2 AC simulations with Python and SPICE
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html">
     Capacitors and Inductors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html#ac-sources">
     AC Sources
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html#v-max-fourier-terms-and-rms">
     <span class="math notranslate nohighlight">
      \(V_{max}\)
     </span>
     ,  Fourier terms, and RMS¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html#single-phase-cirucit">
     Single Phase Cirucit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html#two-phase-system">
     Two-Phase System¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html#three-phase-four-wire-y-star-topology">
     Three Phase Four Wire Y (Star) Topology ¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_1_One-Two-Three_Phase_AC.html#three-phase-three-wire-delta-topology">
     Three Phase Three Wire
     <span class="math notranslate nohighlight">
      \(\Delta\)
     </span>
     Topology
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_2_RCL_filters.html">
     Basic Passive Filters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_2_RCL_filters.html#first-order-cascade-filter">
     First Order Cascade filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_2_RCL_filters.html#second-order-filters-and-resonators">
     Second-Order Filters and resonators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_2_RCL_filters.html#all-pass-filters">
     All Pass filters
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Mutual Inductance and SPICE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#series-mutual-inductance">
     Series Mutual inductance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#parallel-mutual-inductance">
     Parallel Mutual Inductance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#purposely-designed-mutual-inductive-element-the-razivi-t-coil">
     Purposely designed Mutual Inductive Element; The Razivi T-Coil
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#transformers">
     Transformers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#citations">
     Citations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html">
     What is PZ anylsis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html#pz-analysis-of-an-rc-lowpass-filter">
     PZ analysis of an RC lowpass filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html#pz-ease">
     PZ ease
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html#pole-zero-analysis-of-a-series-band-reject-filter">
     Pole-Zero analysis of a Series Band Reject filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html#pole-zero-analysis-of-a-lattice-all-pass-filter">
     Pole-Zero analysis of a lattice All-Pass filter¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html#add-the-razavi-t-coil-after-the-previous-magnetic-section-is-done">
     Add the Razavi T-coil after the previous magnetic section is done¶
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AC_4_PZ.html#citations">
     Citations
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html">
   Checking tool
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#basic-elements">
   Basic Elements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-sinusoidalmixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     SinusoidalMixin
    </span>
   </code>
   Based
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-pulsemixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     PulseMixin
    </span>
   </code>
   Based
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-exponentialmixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     ExponentialMixin
    </span>
   </code>
   Based
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-piecewiselinearmixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     PieceWiseLinearMixin
    </span>
   </code>
   Based
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-singlefrequencyfmmixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     SingleFrequencyFMMixin
    </span>
   </code>
   Based
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-amplitudemodulatedmixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     AmplitudeModulatedMixin
    </span>
   </code>
   Based
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/skidl_2_pyspice_check.html#highlevel-elements-randommixin-based">
   Highlevel Elements
   <code class="docutils literal notranslate">
    <span class="pre">
     RandomMixin
    </span>
   </code>
   Based
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/AC_2/AC_3_CoupledMag.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/PyLCARS/Python-and-SPICE-Book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/PyLCARS/Python-and-SPICE-Book/issues/new?title=Issue%20on%20page%20%2FAC_2/AC_3_CoupledMag.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/PyLCARS/Python-and-SPICE-Book/master?urlpath=tree/docs/AC_2/AC_3_CoupledMag.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Mutual Inductance and SPICE
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#series-mutual-inductance">
   Series Mutual inductance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#series-adding-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-series-derivation-proof-and-examples-6-04min">
     Series Adding Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Series (Derivation / Proof and Examples)” @~ 6:04min
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#no-coupling">
       No Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#with-coupling">
       With Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#equivlint-single-inductor">
       Equivlint Single Inductor
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#comperion-between-all-three-cases">
       Comperion between all three cases
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#series-opposing-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-series-derivation-proof-and-examples-7-17min">
     Series Opposing Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Series (Derivation / Proof and Examples)” @~ 7:17min
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       No Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       With Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#equivalent-single-inductor">
       Equivalent Single Inductor
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#compersion-between-all-three-cases">
       Compersion between all three cases
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parallel-mutual-inductance">
   Parallel Mutual Inductance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parallel-adding-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-parallel-derivation-proof-and-examples-13-04min">
     Parallel Adding Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Parallel (Derivation / Proof and Examples)” @~ 13:04min
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       No Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       With Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id5">
       Equivalent Single Inductor
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id6">
       Compersion between all three cases
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parallel-opposing-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-parallel-derivation-proof-and-examples-14-25min">
     Parallel Opposing Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Parallel (Derivation / Proof and Examples)” @~ 14:25min
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       No Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id8">
       With Coupling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       Equivalent Single Inductor
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id10">
       Compersion between all three cases
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#purposely-designed-mutual-inductive-element-the-razivi-t-coil">
   Purposely designed Mutual Inductive Element; The Razivi T-Coil
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transformers">
   Transformers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-transformer-with-xspice">
     Basic Transformer with XSPICE¶
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quick-rundown-on-instantiating-xspice-elements-with-skidl">
     Quick rundown on instantiating XSPICE elements with SKiDl
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#xspice-made-primitive-transformer">
     XSPICE made primitive Transformer
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parallel-primary-and-seconday-configeration">
     Parallel Primary and Seconday configeration
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#anti-parallel-primary-and-secondary-configuration">
     Anti-Parallel Primary and Secondary configuration
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#autotransformer">
     Autotransformer
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#isolation">
     Isolation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#test-bench-type">
       Test Bench Type
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#medical-type">
       Medical Type
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multi-winding">
     Multi Winding
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cinter-tapped">
     Cinter-tapped
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#current-transformer">
     Current Transformer
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#y-delta-converters">
     Y-Delta Converters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#citations">
   Citations
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p>TODO:</p>
<p>R1:</p>
<ul class="simple">
<li><p>get in touch with ngspice developers to go over xspice’s lcouple &amp; magnetic core</p></li>
<li><p>reivew the tcoil more in depth</p></li>
</ul>
<p>R2:</p>
<ul class="simple">
<li><p>Get rest of standard transformer done</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skidl.pyspice</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1">#can you say cheeky </span>
<span class="kn">import</span> <span class="nn">PySpice</span> <span class="k">as</span> <span class="nn">pspice</span>
<span class="c1">#becouse it&#39;s written by a kiwi you know</span>
<span class="kn">import</span> <span class="nn">lcapy</span> <span class="k">as</span> <span class="nn">kiwi</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">sympy</span> <span class="k">as</span> <span class="nn">sym</span>

<span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">zpk2tf</span> <span class="k">as</span> <span class="n">scipy_zpk2tf</span>


<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">YouTubeVideo</span><span class="p">,</span> <span class="n">display</span>

<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">warnings</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING: KICAD_SYMBOL_DIR environment variable is missing, so the default KiCad symbol libraries won&#39;t be searched.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#import dc code from parral folder</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;../DC_1/&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">DC_1_Codes</span> <span class="kn">import</span> <span class="n">get_skidl_spice_ref</span>

<span class="kn">from</span> <span class="nn">AC_2_Codes</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">sym</span><span class="o">.</span><span class="n">init_printing</span><span class="p">()</span>

<span class="c1">#notebook specific loading control statements </span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="c1">#tool to log notebook internals</span>
<span class="c1">#https://github.com/jrjohansson/version_information</span>
<span class="o">%</span><span class="k">load_ext</span> version_information
<span class="o">%</span><span class="k">version_information</span> skidl, PySpice,lcapy, sympy, numpy, matplotlib, pandas, scipy
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table><tr><th>Software</th><th>Version</th></tr><tr><td>Python</td><td>3.7.6 64bit [GCC 7.3.0]</td></tr><tr><td>IPython</td><td>7.12.0</td></tr><tr><td>OS</td><td>Linux 4.19.104 microsoft standard x86_64 with debian bullseye sid</td></tr><tr><td>skidl</td><td>0.0.31.dev0</td></tr><tr><td>PySpice</td><td>1.4.3</td></tr><tr><td>lcapy</td><td>0.75.dev0</td></tr><tr><td>sympy</td><td>1.6.2</td></tr><tr><td>numpy</td><td>1.18.1</td></tr><tr><td>matplotlib</td><td>3.3.0</td></tr><tr><td>pandas</td><td>1.1.4</td></tr><tr><td>scipy</td><td>1.4.1</td></tr><tr><td colspan='2'>Thu Jan 28 00:39:05 2021 MST</td></tr></table></div></div>
</div>
<div class="section" id="mutual-inductance-and-spice">
<h1>Mutual Inductance and SPICE<a class="headerlink" href="#mutual-inductance-and-spice" title="Permalink to this headline">¶</a></h1>
<p>For a recollection of the basic theory of self and mutual inductance recall the YT video on the subject below from ALL ABOUT ELECTRONICS. However, let’s be clear about this right now; SPICE is not a field simulator. SPICE just does a bit more than your EE 101/102 textbook. Though we will see there are ways to enhance the basic SPICE with XSPICE to implement more advanced magnetic device models. But even with XSPICE, we can still not get to the level of field solvers like Ansys who will do full E&amp;M simulations and then extract the S-parameters and then use that as part of its SPICE incarnation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;hoTInTKij0o&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/hoTInTKij0o"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<p>The other thing to recall is that inductors in reference to other inductors are polarized elements and that polarization does have consequences as explained by ALL ABOUT ELECTRONICS in the YT video “Dot Convention in Magnetically Coupled Circuits”</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;sILgO4sQmRs&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/sILgO4sQmRs"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<p>Where in SPICE as we will see the dot belongs to the first terminal of the inductor. Further, to make SPICE aware of what inductors are coupled to which we use the <code class="docutils literal notranslate"><span class="pre">K</span></code> statement who’s SPICE syntax is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KXXXXXXX</span> <span class="n">LYYYYYYY</span> <span class="n">LZZZZZZZ</span> <span class="n">value</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">KXXXXXXX</span></code> is the name of the coupling, <code class="docutils literal notranslate"><span class="pre">LYYYYYYY</span></code> and <code class="docutils literal notranslate"><span class="pre">LZZZZZZZ</span></code> are the two inductors that are being coupled. And finally, value the value of the coefficient of coupling <span class="math notranslate nohighlight">\(k\)</span> where <span class="math notranslate nohighlight">\(k\)</span> can take on a value from 0 to 1 and is defined as</p>
<div class="math notranslate nohighlight">
\[k=\dfrac{M}{\sqrt{L_Y L_Z}}\]</div>
<p>where <span class="math notranslate nohighlight">\(M\)</span> is the mutual inductance between the two inductors and <span class="math notranslate nohighlight">\(L_Y\)</span> &amp; <span class="math notranslate nohighlight">\(L_Z\)</span> are the values of the inductors of the two inductors respectively</p>
</div>
<div class="section" id="series-mutual-inductance">
<h1>Series Mutual inductance<a class="headerlink" href="#series-mutual-inductance" title="Permalink to this headline">¶</a></h1>
<p>The following is a quick testbench to when testing mutual inductance in SPICE</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#%%writefile -a AC_2_Codes.py</span>
<span class="c1">#chapteer 2 section 3 mutual_tester class</span>
<span class="c1">#class to perform the analysis of the coupled inductors in section 3</span>

<span class="k">class</span> <span class="nc">mutual_tester</span><span class="p">(</span><span class="n">ac_ease</span><span class="p">,</span> <span class="n">ac_representation_tool</span><span class="p">,</span> <span class="n">eecomplex_plot_templets</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quick class to test mutual inductance </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">circ</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">start_freq</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_Hz</span><span class="p">,</span> <span class="n">stop_freq</span><span class="o">=</span><span class="mi">100</span><span class="nd">@u_Hz</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Quick class to test mutual inductance </span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            circ (pyspice circuit): circuit under test</span>
<span class="sd">            title (str): title for plots</span>
<span class="sd">            start_freq(float; Hertz; 1@u_Hz): the starting freauncy</span>
<span class="sd">            stop_freq(float; Hertz; 100@u_Hz): the ending freauncy</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            does the ac sim of the circuit, produces the ac values transformed </span>
<span class="sd">            in `self.ac_sim_mag_DF` ect and creates a bode plot of the results</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1">#do what ac_ease is supposed to do at startup</span>
        <span class="c1">#instainte the simulation from the circuit</span>
        <span class="n">ac_ease</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">circ</span><span class="p">)</span>
        <span class="c1">#setup the simulation parameter with the helper method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ac_sweep_setup</span><span class="p">(</span><span class="n">start_freq</span><span class="p">,</span> <span class="n">stop_freq</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;decade&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="c1">#do the simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_ac_sim</span><span class="p">()</span>
        
        
        <span class="c1">#do what ac_representation_tool is supposed to do at startup</span>
        <span class="c1">#and pass in the selfs from `ac_ease`&#39;s ac_resultsNB_DF</span>
        <span class="n">ac_representation_tool</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_resultsNB_DF</span><span class="p">)</span>
        <span class="c1">#generate the representations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_mag_phase</span><span class="p">()</span>
        
        
        <span class="n">eecomplex_plot_templets</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


        <span class="n">fig</span><span class="p">,</span> <span class="n">ax_bode</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> 

        <span class="bp">self</span><span class="o">.</span><span class="n">bode_plot_one_templet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> 
                          <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Source_Current_Draw&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax_bode</span><span class="p">)</span>

        
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>For each of the examples from ALL ABOUT ELECTRONICS here will create the circuit in three ways to see what effect mutual coupling has. The first is with no coupling. The second is invoking the mutual coupling. And the third case implementing the circuit with the theoretical simplification. This is followed by plotting all three cases on top of each other to see the effect of invoking mutual coupling and the theoretical simplification from SPICE’s view.</p>
<div class="section" id="series-adding-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-series-derivation-proof-and-examples-6-04min">
<h2>Series Adding Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Series (Derivation / Proof and Examples)” &#64;~ 6:04min<a class="headerlink" href="#series-adding-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-series-derivation-proof-and-examples-6-04min" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;49OL_3L7BFA&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">364</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/49OL_3L7BFA?start=364"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<div class="section" id="no-coupling">
<h3>No Coupling<a class="headerlink" href="#no-coupling" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="c1">#k=K(ind1=l1, ind2=l2, coupling=0.5)</span>


<span class="n">circ_nok</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In N_2 3H
L2 N_2 0 3H
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_nok</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">,</span> <span class="s1">&#39;No Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_16_1.png" src="../_images/AC_3_CoupledMag_16_1.png" />
</div>
</div>
</div>
<div class="section" id="with-coupling">
<h3>With Coupling<a class="headerlink" href="#with-coupling" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="n">k</span><span class="o">=</span><span class="n">K</span><span class="p">(</span><span class="n">ind1</span><span class="o">=</span><span class="n">l1</span><span class="p">,</span> <span class="n">ind2</span><span class="o">=</span><span class="n">l2</span><span class="p">,</span> <span class="n">coupling</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>


<span class="n">circ_k</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_k</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In N_2 3H
L2 N_2 0 3H
K1 L1 L2 0.5
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_k</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_k</span><span class="p">,</span> <span class="s1">&#39;With Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_19_1.png" src="../_images/AC_3_CoupledMag_19_1.png" />
</div>
</div>
</div>
<div class="section" id="equivlint-single-inductor">
<h3>Equivlint Single Inductor<a class="headerlink" href="#equivlint-single-inductor" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">9</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>



<span class="n">circ_eq</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 9H
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_eq</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">,</span> <span class="s1">&#39;Equivalent&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_22_1.png" src="../_images/AC_3_CoupledMag_22_1.png" />
</div>
</div>
</div>
<div class="section" id="comperion-between-all-three-cases">
<h3>Comperion between all three cases<a class="headerlink" href="#comperion-between-all-three-cases" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comp_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">comp_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span>
                        <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span>
                               <span class="p">)</span>
<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>


<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;eq&#39;</span><span class="p">)</span>

<span class="n">ax_mag</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Compersion Bode plots of Serial Inductors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_24_0.png" src="../_images/AC_3_CoupledMag_24_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="series-opposing-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-series-derivation-proof-and-examples-7-17min">
<h2>Series Opposing Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Series (Derivation / Proof and Examples)” &#64;~ 7:17min<a class="headerlink" href="#series-opposing-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-series-derivation-proof-and-examples-7-17min" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;49OL_3L7BFA&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">437</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/49OL_3L7BFA?start=437"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<div class="section" id="id1">
<h3>No Coupling<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">l2</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="c1">#k=K(ind1=l1, ind2=l2, coupling=0.9)</span>


<span class="n">circ_nok</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In N_2 1H
L2 0 N_2 4H
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_nok</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">,</span> <span class="s1">&#39;No Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_29_1.png" src="../_images/AC_3_CoupledMag_29_1.png" />
</div>
</div>
</div>
<div class="section" id="id2">
<h3>With Coupling<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">l2</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="n">k</span><span class="o">=</span><span class="n">K</span><span class="p">(</span><span class="n">ind1</span><span class="o">=</span><span class="n">l1</span><span class="p">,</span> <span class="n">ind2</span><span class="o">=</span><span class="n">l2</span><span class="p">,</span> <span class="n">coupling</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>


<span class="n">circ_k</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_k</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In N_2 1H
L2 0 N_2 4H
K1 L1 L2 0.9
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_k</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_k</span><span class="p">,</span> <span class="s1">&#39;With Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_32_1.png" src="../_images/AC_3_CoupledMag_32_1.png" />
</div>
</div>
</div>
<div class="section" id="equivalent-single-inductor">
<h3>Equivalent Single Inductor<a class="headerlink" href="#equivalent-single-inductor" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">1.4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>



<span class="n">circ_eq</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1.4H
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_eq</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">,</span> <span class="s1">&#39;Equivalent&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_35_1.png" src="../_images/AC_3_CoupledMag_35_1.png" />
</div>
</div>
</div>
<div class="section" id="compersion-between-all-three-cases">
<h3>Compersion between all three cases<a class="headerlink" href="#compersion-between-all-three-cases" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comp_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">comp_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span>
                        <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span>
                               <span class="p">)</span>
<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>


<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;eq&#39;</span><span class="p">)</span>

<span class="n">ax_mag</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Compersion Bode plots of Anti-Serial Inductors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_37_0.png" src="../_images/AC_3_CoupledMag_37_0.png" />
</div>
</div>
</div>
</div>
</div>
<div class="section" id="parallel-mutual-inductance">
<h1>Parallel Mutual Inductance<a class="headerlink" href="#parallel-mutual-inductance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="parallel-adding-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-parallel-derivation-proof-and-examples-13-04min">
<h2>Parallel Adding Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Parallel (Derivation / Proof and Examples)” &#64;~ 13:04min<a class="headerlink" href="#parallel-adding-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-parallel-derivation-proof-and-examples-13-04min" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;NacczEJj_iI&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">784</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/NacczEJj_iI?start=784"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<div class="section" id="id3">
<h3>No Coupling<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">rdummy2</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>

<span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span>
<span class="n">rdummy2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">l2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">gnd</span>

<span class="c1">#k=K(ind1=l1, ind2=l2, coupling=0.5)</span>

<span class="n">circ_nok</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1H
L2 N_2 0 4H
Rdummy_1 In N_2 0Ohm
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_nok</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">,</span> <span class="s1">&#39;No Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_43_1.png" src="../_images/AC_3_CoupledMag_43_1.png" />
</div>
</div>
</div>
<div class="section" id="id4">
<h3>With Coupling<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">rdummy2</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>

<span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span>
<span class="n">rdummy2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">l2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">gnd</span>

<span class="n">k</span><span class="o">=</span><span class="n">K</span><span class="p">(</span><span class="n">ind1</span><span class="o">=</span><span class="n">l1</span><span class="p">,</span> <span class="n">ind2</span><span class="o">=</span><span class="n">l2</span><span class="p">,</span> <span class="n">coupling</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">circ_k</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_k</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1H
L2 N_2 0 4H
Rdummy_1 In N_2 0Ohm
K1 L1 L2 0.5
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_k</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_k</span><span class="p">,</span> <span class="s1">&#39;With Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_46_1.png" src="../_images/AC_3_CoupledMag_46_1.png" />
</div>
</div>
</div>
<div class="section" id="id5">
<h3>Equivalent Single Inductor<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="c1">#k=K(ind1=l1, ind2=l2, coupling=0.5)</span>

<span class="n">circ_eq</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1H
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_eq</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">,</span> <span class="s1">&#39;Equivalent Parallel Inductors&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_49_1.png" src="../_images/AC_3_CoupledMag_49_1.png" />
</div>
</div>
</div>
<div class="section" id="id6">
<h3>Compersion between all three cases<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comp_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">comp_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span>
                        <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span>
                               <span class="p">)</span>
<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>


<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;eq&#39;</span><span class="p">)</span>

<span class="n">ax_mag</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Compersion Bode plots of Parallel Inductors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_51_0.png" src="../_images/AC_3_CoupledMag_51_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="parallel-opposing-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-parallel-derivation-proof-and-examples-14-25min">
<h2>Parallel Opposing Mutual Inductance from ALL ABOUT ELECTRONICS “Mutually Coupled Inductors in Parallel (Derivation / Proof and Examples)” &#64;~ 14:25min<a class="headerlink" href="#parallel-opposing-mutual-inductance-from-all-about-electronics-mutually-coupled-inductors-in-parallel-derivation-proof-and-examples-14-25min" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;NacczEJj_iI&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">865</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/NacczEJj_iI?start=865"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<div class="section" id="id7">
<h3>No Coupling<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">rdummy2</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>

<span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span>
<span class="n">rdummy2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">l2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+=</span><span class="n">gnd</span>

<span class="c1">#k=K(ind1=l1, ind2=l2, coupling=0.5)</span>

<span class="n">circ_nok</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1H
L2 0 N_2 4H
Rdummy_1 In N_2 0Ohm
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_nok</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_nok</span><span class="p">,</span> <span class="s1">&#39;Anti-Parallel Inductor with No Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_56_1.png" src="../_images/AC_3_CoupledMag_56_1.png" />
</div>
</div>
</div>
<div class="section" id="id8">
<h3>With Coupling<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">l2</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">rdummy2</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>

<span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span>
<span class="n">rdummy2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">l2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+=</span><span class="n">gnd</span>
<span class="n">k</span><span class="o">=</span><span class="n">K</span><span class="p">(</span><span class="n">ind1</span><span class="o">=</span><span class="n">l1</span><span class="p">,</span> <span class="n">ind2</span><span class="o">=</span><span class="n">l2</span><span class="p">,</span> <span class="n">coupling</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">circ_k</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_k</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1H
L2 0 N_2 4H
Rdummy_1 In N_2 0Ohm
K1 L1 L2 0.5
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_k</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_k</span><span class="p">,</span> <span class="s1">&#39;Anti-Parallel Inductors with Coupling&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_59_1.png" src="../_images/AC_3_CoupledMag_59_1.png" />
</div>
</div>
</div>
<div class="section" id="id9">
<h3>Equivalent Single Inductor<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">l1</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_H</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="c1">#k=K(ind1=l1, ind2=l2, coupling=0.5)</span>

<span class="n">circ_eq</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
L1 In 0 1H
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anylsis_eq</span><span class="o">=</span><span class="n">mutual_tester</span><span class="p">(</span><span class="n">circ_eq</span><span class="p">,</span> <span class="s1">&#39;Equivalent Anti-Parallel Inductor&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1 Hz</td>
      <td>100 Hz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_62_1.png" src="../_images/AC_3_CoupledMag_62_1.png" />
</div>
</div>
</div>
<div class="section" id="id10">
<h3>Compersion between all three cases<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#compare without K, with K, theoretical equivalent </span>
<span class="n">comp_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">comp_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span>
                               <span class="n">anylsis_nok</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span>
                        <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">ax_mag</span><span class="p">,</span> <span class="n">ax_phase</span><span class="p">]</span>
                               <span class="p">)</span>
<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_k</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mitK&#39;</span><span class="p">)</span>


<span class="n">ax_mag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">)</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">anylsis_eq</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;eq&#39;</span><span class="p">)</span>

<span class="n">ax_mag</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_phase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Compersion Bode plots of Anti-Parallel Inductors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_64_0.png" src="../_images/AC_3_CoupledMag_64_0.png" />
</div>
</div>
</div>
</div>
</div>
<div class="section" id="purposely-designed-mutual-inductive-element-the-razivi-t-coil">
<h1>Purposely designed Mutual Inductive Element; The Razivi T-Coil<a class="headerlink" href="#purposely-designed-mutual-inductive-element-the-razivi-t-coil" title="Permalink to this headline">¶</a></h1>
<p>So, the question that should be asked is when does mutual induction come into play outside of transformers. From a field’s standpoint, mutual induction can be used in testing the effect of placing inductors too close to each other in layout by extracting <span class="math notranslate nohighlight">\(k\)</span> from the field simulation. But it does have uses. One of which that shows up a lot in high-speed SERDES is the Razivi T-Coil where a paper on the topology can be found there: <a class="reference external" href="https://www.seas.ucla.edu/brweb/papers/Journals/BRFall15TCoil.pdf">The Bridged T-Coil</a>.</p>
<p>A study of a variation of the T-coil was given by Jordan Edmunds in a two-part YT video on the subject. Where we will recreate the example from part two.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;-kSSMOAhlwU&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/-kSSMOAhlwU"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;vr2oYehKC8Q&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="500"
    height="400"
    src="https://www.youtube.com/embed/vr2oYehKC8Q"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#%%writefile -a AC_2_Codes.py</span>
<span class="c1">#chapteer 2 section 3 t_coil class</span>
<span class="c1">#class with lcapy and skidl subcircuit to create a T-coil from https://youtu.be/vr2oYehKC8Q</span>

<span class="k">class</span> <span class="nc">t_coil</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subcirc_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">L_value</span><span class="o">=</span><span class="mi">375</span><span class="nd">@u_nH</span><span class="p">,</span> <span class="n">K_value</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">CB_value</span><span class="o">=.</span><span class="mi">125</span><span class="nd">@u_pF</span><span class="p">,</span> <span class="n">CL_value</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_pF</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        T-Coil example from https://youtu.be/vr2oYehKC8Q example</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            subcirc_ref (str): reference to use for the base of the internal elements</span>
<span class="sd">            L_value (float; 375@u_nH; Henerys):  inductance of each of the two inductors in the T-coil</span>
<span class="sd">            K_value (float; 1/3): the magnetic coupling between the two inductors</span>
<span class="sd">            CB_value (float; .125@u_pF; Farads): capacitance of the bridge capacitor between the two coils</span>
<span class="sd">            CL_value (float; 1@u_pF; Farads): capacitance of the shunt capacitor between the two cols</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        TODO:</span>
<span class="sd">            -add assertions</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">subcirc_ref</span><span class="o">=</span><span class="n">subcirc_ref</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L_value</span><span class="o">=</span><span class="n">L_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">K_value</span><span class="o">=</span><span class="n">K_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CB_value</span><span class="o">=</span><span class="n">CB_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CL_value</span><span class="o">=</span><span class="n">CL_value</span>
    
    <span class="nd">@subcircuit</span>
    <span class="k">def</span> <span class="nf">SKiDl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term_0</span><span class="p">,</span> <span class="n">term_1</span><span class="p">,</span> <span class="n">term_2</span><span class="p">,</span> <span class="n">term_3</span><span class="p">,</span> <span class="n">return_elements</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Terminals:</span>
<span class="sd">        term_0, term_1, term_2, term_3</span>
<span class="sd">        </span>
<span class="sd">        Terminals are defined via:</span>
<span class="sd">        ```</span>
<span class="sd">        Left_Termanals - T-coil - Right_Termanals</span>
<span class="sd">                             +----+  </span>
<span class="sd">        Postive V_i   term_0-|0  2|-term_2     Postive V_o</span>
<span class="sd">        Negtive V_i   term_1-|1  3|-term_3     Negtive V_o</span>
<span class="sd">                             +----+</span>
<span class="sd">        ```</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            return_internls (bool; False): If True return out the internal Voltage Source,</span>
<span class="sd">                and Resistance objects in this package</span>
<span class="sd">        Returns:</span>
<span class="sd">            Returns elements to circuit RC lowpass filter part element object and if `return_internls`</span>
<span class="sd">            is True will return the internal voltage and resistance objects in that order </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcirc_ref</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
            <span class="n">CBref</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span><span class="sa">f</span><span class="s1">&#39;CB_</span><span class="si">{self.subcirc_ref}</span><span class="s1">&#39;</span><span class="p">}</span>
            <span class="n">CLref</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span><span class="sa">f</span><span class="s1">&#39;CL_</span><span class="si">{self.subcirc_ref}</span><span class="s1">&#39;</span><span class="p">}</span>
            <span class="n">LLref</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span><span class="sa">f</span><span class="s1">&#39;LL_</span><span class="si">{self.subcirc_ref}</span><span class="s1">&#39;</span><span class="p">}</span>
            <span class="n">LRref</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span><span class="sa">f</span><span class="s1">&#39;LR_</span><span class="si">{self.subcirc_ref}</span><span class="s1">&#39;</span><span class="p">}</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">CBref</span><span class="o">=</span><span class="p">{}</span>
            <span class="n">CLref</span><span class="o">=</span><span class="p">{}</span>
            <span class="n">LLref</span><span class="o">=</span><span class="p">{}</span>
            <span class="n">LRref</span><span class="o">=</span><span class="p">{}</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">cb</span><span class="o">=</span><span class="n">C</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">CB_value</span><span class="p">,</span> <span class="o">**</span><span class="n">CBref</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cl</span><span class="o">=</span><span class="n">C</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">CL_value</span><span class="p">,</span> <span class="o">**</span><span class="n">CLref</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ll</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">L_value</span><span class="p">,</span> <span class="o">**</span><span class="n">LLref</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lr</span><span class="o">=</span><span class="n">L</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">L_value</span><span class="p">,</span> <span class="o">**</span><span class="n">LRref</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mul</span><span class="o">=</span><span class="n">K</span><span class="p">(</span><span class="n">ind1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ll</span><span class="p">,</span> <span class="n">ind2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lr</span><span class="p">,</span> <span class="n">coupling</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">K_value</span><span class="p">)</span>
        
        <span class="n">term_0</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">term_2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cb</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">term_0</span><span class="p">,</span> <span class="n">term_2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cl</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">ll</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">term_1</span>
        <span class="n">term_1</span><span class="o">+=</span><span class="n">term_3</span>
        
        <span class="k">if</span> <span class="n">return_elements</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ll</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mul</span>
        
        
        
        
    <span class="k">def</span> <span class="nf">lcapy_self</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw_me</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_values</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a lcapy schematic of this classes filter that</span>
<span class="sd">        can be used for amongst other things: draw a basic schematic</span>
<span class="sd">        of this class circuit, extract the transfer function, </span>
<span class="sd">        extract the 2Port Representation</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            draw_me (bool): will draw a schematic of this classes circuit schematic</span>
<span class="sd">            </span>
<span class="sd">            with_values (bool): will push the filters element values into</span>
<span class="sd">                the resulting lcapy circuit object in place of abstract simply variables</span>
<span class="sd">            </span>
<span class="sd">        Return:</span>
<span class="sd">            the lcapys circuit object is stored in `self.schematic` and will</span>
<span class="sd">            have abstract sympy variable for the elements if `with_values` is False</span>
<span class="sd">            and will draw the schematic of just this classes filter if `draw_me` is True</span>
<span class="sd">        </span>
<span class="sd">        TODO:</span>
<span class="sd">            - Figure out how to add the K dots</span>
<span class="sd">            - get the Vin statement into the schematic</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_values</span><span class="o">=</span><span class="n">with_values</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">=</span><span class="n">kiwi</span><span class="o">.</span><span class="n">Circuit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;W 1 1_1; right=2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;W 0 0_1; right&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Ll N1 0_1; left&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Lr N1 2_1; right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Cl N1 1_1; down&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;W 0_1 0_2; up&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;W 2_1 2_2; up&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Cb 0_2 2_2; right&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;W 2_1 2; right=1.5&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;W 1_1 3; right=1.5&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;P2 2 3; down, v=V_o&#39;</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="n">with_values</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">subs</span><span class="p">({</span>
                <span class="s1">&#39;Ll&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">L_value</span><span class="p">,</span>
                <span class="s1">&#39;Lr&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">L_value</span><span class="p">,</span>
                <span class="s1">&#39;Cl&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">CL_value</span><span class="p">,</span>
                <span class="s1">&#39;Cb&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">CB_value</span><span class="p">})</span>
        
        <span class="k">if</span> <span class="n">draw_me</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">get_tf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_values</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ZPK</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        will extract the symbolic transfer function for this filter</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            with_values (bool): will push the filters element values into</span>
<span class="sd">                the resulting lcapy circuit object in place of abstract sympy variables</span>
<span class="sd">            </span>
<span class="sd">            ZPK (bool): if True will try to return the TF in zero-pole-gain form</span>
<span class="sd">                else will try to return the TF in canonical form </span>
<span class="sd">                where the unity coefficient is the highest power of the denominator</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lcapy_self</span><span class="p">(</span><span class="n">draw_me</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">with_values</span><span class="o">=</span><span class="n">with_values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">ZPK</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">ZPK</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tf</span><span class="o">.</span><span class="n">canonical</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">get_twoPort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_rep</span><span class="o">=</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">with_values</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the 2Port network representation of this filter.</span>
<span class="sd">        The 2Port representation can be controlled</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            network_rep (str; &#39;Y&#39;): control string for what</span>
<span class="sd">                representation is used to choose from:</span>
<span class="sd">                </span>
<span class="sd">                &#39;Z&#39;: two-port Z-parameters matrix</span>
<span class="sd">                &#39;Y&#39;: two-port Y-parameters matrix</span>
<span class="sd">                &#39;H&#39;: two-port H-parameters matrix</span>
<span class="sd">                &#39;G&#39;: two-port G-parameters matrix</span>
<span class="sd">                &#39;ABCD&#39;: two-port A-parameters matrix</span>
<span class="sd">                &#39;invABCD&#39;: two-port B-parameters matrix</span>
<span class="sd">                &#39;S&#39;: two-port S-parameters matrix</span>
<span class="sd">                &#39;T&#39;: two-port T-parameters matrix</span>
<span class="sd">                </span>
<span class="sd">                </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">lcapy_self</span><span class="p">(</span><span class="n">draw_me</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">with_values</span><span class="o">=</span><span class="n">with_values</span><span class="p">)</span>
        
        <span class="c1">#create an action dict to get the 2P rep</span>
        <span class="n">rep_actions</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;Z&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Zparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;Y&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Yparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> 
            <span class="s1">&#39;H&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Hparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;G&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Gparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;ABCD&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Aparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;invABCD&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Bparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;S&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Sparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;T&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">Tparams</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">}</span>
        
        <span class="k">assert</span> <span class="n">network_rep</span> <span class="ow">in</span> <span class="n">rep_actions</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="sa">f</span><span class="s1">&#39;`</span><span class="si">{network_rep}</span><span class="s1">` is not 2Port rep&#39;</span>
        
        <span class="k">return</span> <span class="n">rep_actions</span><span class="p">[</span><span class="n">network_rep</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">schematic</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T_coil</span><span class="o">=</span><span class="n">t_coil</span><span class="p">()</span>
<span class="n">T_coil</span><span class="o">.</span><span class="n">lcapy_self</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_69_0.png" src="../_images/AC_3_CoupledMag_69_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#get this filters abstract transfer function</span>
<span class="n">T_coil</span><span class="o">.</span><span class="n">get_tf</span><span class="p">(</span><span class="n">with_values</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ZPK</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_latex math notranslate nohighlight">
\[\frac{s^{4} + \frac{s^{2}}{C_{l} L_{r}} + \frac{s^{2}}{C_{l} L_{l}} + \frac{1}{C_{b} C_{l} L_{l} L_{r}}}{s^{4} + \frac{s^{2} \left(C_{b} L_{l} + C_{b} L_{r} + C_{l} L_{l}\right)}{C_{b} C_{l} L_{l} L_{r}} + \frac{1}{C_{b} C_{l} L_{l} L_{r}}}\]</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#get this filters transfer function</span>
<span class="n">T_coil</span><span class="o">.</span><span class="n">get_tf</span><span class="p">(</span><span class="n">with_values</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ZPK</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_latex math notranslate nohighlight">
\[\frac{s^{4} + \frac{16000000000000000000 s^{2}}{3} + \frac{512000000000000000000000000000000000000}{9}}{s^{4} + \frac{80000000000000000000 s^{2}}{3} + \frac{512000000000000000000000000000000000000}{9}}\]</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">);</span> <span class="n">net_out</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>

<span class="n">T_coil</span><span class="o">.</span><span class="n">SKiDl</span><span class="p">(</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span><span class="p">,</span> <span class="n">net_out</span><span class="p">,</span> <span class="n">gnd</span><span class="p">)</span>

<span class="n">circ</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
C1 In Out 0.125pF
C2 N_2 0 1pF
L1 N_2 In 375nH
L2 Out N_2 375nH
K1 L1 L2 0.3333333333333333
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t_coil_resp</span><span class="o">=</span><span class="n">qfilter_explorer</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="s1">&#39;Equivalent&#39;</span><span class="p">,</span> <span class="n">start_freq</span><span class="o">=</span><span class="mf">1e7</span><span class="p">,</span> <span class="n">stop_freq</span><span class="o">=</span><span class="mf">1e10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1e+07</td>
      <td>1e+10</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="../_images/AC_3_CoupledMag_73_1.png" src="../_images/AC_3_CoupledMag_73_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t_coil_resp</span><span class="o">.</span><span class="n">symbolic_tf</span><span class="p">(</span><span class="n">T_coil</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_74_0.png" src="../_images/AC_3_CoupledMag_74_0.png" />
</div>
</div>
</div>
<div class="section" id="transformers">
<h1>Transformers<a class="headerlink" href="#transformers" title="Permalink to this headline">¶</a></h1>
<p>Am just doing a basic transformer with XSPICE will come back and do the specialty ones at a later time</p>
<div class="section" id="basic-transformer-with-xspice">
<h2>Basic Transformer with XSPICE¶<a class="headerlink" href="#basic-transformer-with-xspice" title="Permalink to this headline">¶</a></h2>
<p>With just SPICE the transformer is modeled as a pair of coupled inductors with a coupling constant between them. So this doesn’t work well for transformers. Yes, we could do it this way but it would be a laughable facsimile to a real transformer with real cores. And again SPICE is not a field solver. So to increase the capability of SPICE more advanced models have been developed. Unfortunately, most of these SPICE enhancements get swallowed up by proprietary EDA companies. But there is a major extension to Berkely’s SPICE (what the core of ngspice is based on) via the Georgia Tech Research Institute that is open source and has been integrated into ngspice; XSPICE.</p>
<p>Here we will just start using XSPICE to create a very simple implementation of a transformer based on what is in the ngspice documentation. But of course, we will do this with SKiDl and wrap it in a class that can give a user or developer a template to bespoke it to their needs.</p>
</div>
<div class="section" id="quick-rundown-on-instantiating-xspice-elements-with-skidl">
<h2>Quick rundown on instantiating XSPICE elements with SKiDl<a class="headerlink" href="#quick-rundown-on-instantiating-xspice-elements-with-skidl" title="Permalink to this headline">¶</a></h2>
<p>While XSPICE has a whole part of the ngspice manual dedicated to it (typically Part 2) the basic XSPICE elements are typically documented in Part 1 Chapter 12 “Mixed-Mode and Behavioral Modeling with XSPICE”. The important parts of that chapter are “Table 12.1: Port Type Modifiers” and Section 12.5 “Predefined Node Types for event-driven simulation”. The rest of the chapter is broken down into three main sections:</p>
<ul class="simple">
<li><p>Analog Models (12.2): these are XSPICE elements with both analog input and outputs like Diodes, S-Domain Transfer Functions, Memristors, etc</p></li>
<li><p>Hybrid Models (12.3): these are XSPICE elements with a mixture of analog and digital IOs such as DAC, ADC, Controlled Digital Oscillators</p></li>
<li><p>Digital Models (12.4): there XSPICE elements with full digital IOs such as RTL logic primitives of AND, NAND, NOR, Latches, and Flip-Flops</p></li>
</ul>
<p>To create the primitive XSPICE transformer we are going to need two XSPICE <em>Inductive Coupling</em> elements (12.2.18) and one XSPICE <em>Magnetic Core</em> element (12.2.19)</p>
<p>Let’s just do a walkthrough of invoking an <em>Inductive Coupling</em> element in SKiDl. First off in the ngspice documentation all XSPICE elements are documented with a three-column table where at the top of the table we get some basic info for the element. What we are after here is the <strong>Spice_Model_Name</strong> row which in this case is <code class="docutils literal notranslate"><span class="pre">lcouple</span></code>. This tells the engine what XSPICE element were using like how <code class="docutils literal notranslate"><span class="pre">V</span></code> tells the engine that the element is a voltage source. The next main section in the table is the Port description <em>PORT_TABLE</em> where for each port it has an entry. Notice for an lcouple element it has two ports <code class="docutils literal notranslate"><span class="pre">l</span></code> and <code class="docutils literal notranslate"><span class="pre">mmf_out</span></code> in the center and far left column respectively. For each port, the most important info is <strong>Allowed_Types</strong> were to understand the cryptic type codes we need to refer to “Table 12.1: Port Type Modifiers”. For <code class="docutils literal notranslate"><span class="pre">l</span></code> we have two allowed types <code class="docutils literal notranslate"><span class="pre">h</span></code> which is a single-ended input referenced to ground, and <code class="docutils literal notranslate"><span class="pre">hd</span></code> which is a differential input with no reference. Here’s the thing, the translation from SKiDl though PySPICE to ngspice will not infer the grounded connection therefore go with the high number of terminals. So in this case port <code class="docutils literal notranslate"><span class="pre">l</span></code> will have two terminals where we are free to make the names of them whatever we want, will go with <code class="docutils literal notranslate"><span class="pre">io1</span></code> and <code class="docutils literal notranslate"><span class="pre">io2</span></code> respectively, but that is your choice though the DOT will go with the first terminal. For the other port <code class="docutils literal notranslate"><span class="pre">mmf_out</span></code> it is only a hd port so we have to create two terminals for it that again can be arbitrarily named but we will go with <code class="docutils literal notranslate"><span class="pre">mmf1</span></code>, <code class="docutils literal notranslate"><span class="pre">mmf2</span></code> here. This is the port that outputs the magnetic flux “current” to another lcouple element or magnetic core element. The last section is the <em>PARAMETER_TABLE</em> which can be quite extensive, but for the lcouple element is just a single parameter. Where each parameter will have info about its type, default value, bounds, etc. Where that can, and in our transformer class, used to write the parameter assertions. For an lcouple element, the only parameter is <code class="docutils literal notranslate"><span class="pre">num_turns</span></code> which is the number of turns for that particular lcouple element. Which, we will write the assertion to be that <code class="docutils literal notranslate"><span class="pre">num_turns</span></code> must be an integer greater than or equal to 1. Armed with the info we need to invoke our element lets look at doing so with SKiDl</p>
<p>The follwing will be a non function cirucit to demnstrate instaint xarray elements with SKiDl before the exstaince class for a full transfomer. We start by create a varibel that holds the number of turns for this inductor and follow it up with an assertion to make sure only valid inputs are allowed</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#var to hold the number of turns</span>
<span class="n">N_turns</span><span class="o">=</span><span class="mi">5</span>
<span class="c1">#assertion</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">N_turns</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">N_turns</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;N_turns must be int &gt;=1&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>We then instantiate the lcouple instance and tie it into the circuit as follows and then dissect what was done</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#refrance lines number in markdown below don&#39;t change them</span>
<span class="n">reset</span><span class="p">()</span>
<span class="c1">#create some dummy nets </span>
<span class="n">io1_dnet</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;io1D&#39;</span><span class="p">);</span> <span class="n">io2_dnet</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;io2D&#39;</span><span class="p">);</span> <span class="n">mmf1_dnet</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;mmf1D&#39;</span><span class="p">);</span> <span class="n">mmf2_dnet</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;mmf1D&#39;</span><span class="p">)</span>

<span class="c1">#instatine the XSPICE lcouple elment</span>
<span class="n">l_couple_ex</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span> <span class="c1"># `A` is the ngspice control leter for XSPICE elements</span>
            <span class="n">io</span><span class="o">=</span><span class="s2">&quot;io1, io2, mmf1, mmf2&quot;</span><span class="p">,</span>  <span class="c1">#io1 &amp; io2 \in port`l` and `mmf1` &amp; `mmf2` \in port `mmf_out`</span>
            <span class="n">model</span><span class="o">=</span><span class="n">XspiceModel</span><span class="p">(</span> <span class="c1">#`model` is filling in the blank for a `A` element and `XspiceModel` for SkiDl</span>
                <span class="s2">&quot;ex_lcouple&quot;</span><span class="p">,</span> <span class="c1">#name for this element instance</span>
                <span class="s2">&quot;lcouple&quot;</span><span class="p">,</span> <span class="c1">#what type of XSPICE element this is</span>
                <span class="n">num_turns</span><span class="o">=</span><span class="n">N_turns</span> <span class="c1">#element parameters as kwargs</span>
            <span class="p">),</span>
        <span class="p">)</span>

<span class="c1">#tie in the lcouple element to the nets</span>
<span class="c1">#first tie to the circuit</span>
<span class="n">l_couple_ex</span><span class="p">[</span><span class="s1">&#39;io1&#39;</span><span class="p">,</span> <span class="s1">&#39;io2&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">io1_dnet</span><span class="p">,</span> <span class="n">io2_dnet</span>
<span class="c1">#second tie for the flux</span>
<span class="n">l_couple_ex</span><span class="p">[</span><span class="s1">&#39;mmf1&#39;</span><span class="p">,</span> <span class="s1">&#39;mmf2&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">mmf1_dnet</span><span class="p">,</span> <span class="n">mmf2_dnet</span>

<span class="n">circ</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pin A1/0/io1/UNSPECIFIED True
Pin A1/1/io2/UNSPECIFIED True
Pin A1/2/mmf1/UNSPECIFIED True
Pin A1/3/mmf2/UNSPECIFIED True
.title 
A1 io1D io2D mmf1D mmf1D_1 ex_lcouple
.model ex_lcouple lcouple (num_turns=5)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<p>In line 7 we instantiate the XSPICE element within a SPICE element type <code class="docutils literal notranslate"><span class="pre">A</span></code>. This is followed up in line 8 with the declaration/creation of the IO terminals. The first port <code class="docutils literal notranslate"><span class="pre">l</span></code> is a <code class="docutils literal notranslate"><span class="pre">hd</span></code> type port therefore differential terminals are appropriately instantiated as <code class="docutils literal notranslate"><span class="pre">io1</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">io2</span></code> followed with port <code class="docutils literal notranslate"><span class="pre">mmf_out</span></code> which is only a <code class="docutils literal notranslate"><span class="pre">hd</span></code> type and so has the arbitrary terminals <code class="docutils literal notranslate"><span class="pre">mmf1</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">mmf2</span></code>. Both these ports are done in one string <code class="docutils literal notranslate"><span class="pre">&quot;io1,</span> <span class="pre">io2,</span> <span class="pre">mmf1,</span> <span class="pre">mmf2&quot;</span></code>. Next in line 9, we invoke <code class="docutils literal notranslate"><span class="pre">model=XspiceModel</span></code> where XspiceModel is the pass-through handler from SKiDl through to the ngspice netlist. The first argument of <code class="docutils literal notranslate"><span class="pre">XspiceModel</span></code> is the name of this element instance in line 10 <code class="docutils literal notranslate"><span class="pre">ex_lcouple</span></code>; where for the full transformer below this will be more descriptive with <code class="docutils literal notranslate"><span class="pre">primary</span></code> and <code class="docutils literal notranslate"><span class="pre">secondary</span></code> to indicate which lcouple element is taking on wich role. The next argument of <code class="docutils literal notranslate"><span class="pre">XspiceModel</span></code> in line 11 must be the <strong>Spice_Model_Name</strong> from the elements document table in the ngspice manual where for a lcouple it’s lcouple. The rest of the arguments are pythonic kwags inputs where the argument is the parameter verbatim of its <strong>Parameter_Name:</strong> in the documentation table then set equal to the value we want it to take. In lcouple elements, there is only a single parameter <code class="docutils literal notranslate"><span class="pre">num_turns</span></code> that we set equal to our variable <code class="docutils literal notranslate"><span class="pre">N_turns</span></code> in line 12. From there we have a now standard SkiDl element that we attach to the rest of the circuit like normal. Thou what actually attaches to what is dictated by the port type and what it’s meant to do. For a lcouple element port <code class="docutils literal notranslate"><span class="pre">mmf_out</span></code> which is made of terminals <code class="docutils literal notranslate"><span class="pre">mmf1</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">mmf2</span></code> is intended to pass a representation of the magnetic flux to either another lcouples <code class="docutils literal notranslate"><span class="pre">mmf_out</span></code> port or to a magnetic core element.</p>
</div>
<div class="section" id="xspice-made-primitive-transformer">
<h2>XSPICE made primitive Transformer<a class="headerlink" href="#xspice-made-primitive-transformer" title="Permalink to this headline">¶</a></h2>
<p>Now know how to translate an XSPICE element from the ngspice docs to a SKiDl element. We now construct a class to act as a very primitive transformer model. And by primitive we mean it does not take into account the resistive and capacitive nature of each of the ports that must be modeled for a more sophisticated transformer model. All the values and basic configuration are taken from the ngspice 32 manual section 12.2.19 examples</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#%%writefile -a AC_2_Codes.py</span>
<span class="c1">#chapteer 2 section 3 basic_xspice_transformer class</span>
<span class="c1">#class with skidl subcircuit to create primitive XSPICE transformer-based</span>
<span class="c1">#on the ex in ngspice 32 manual section 12.2.19</span>

<span class="k">class</span> <span class="nc">basic_xspice_transformer</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basic XSPICE based two-port transformer based on the example</span>
<span class="sd">    in ngspice 32 manual section 12.2.19</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subcirc_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prim_turns</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sec_turns</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a primitive two-port transformer with a magnetic core</span>
<span class="sd">        where core parameters are set in `self.core_specs`</span>
<span class="sd">        </span>
<span class="sd">       Args:</span>
<span class="sd">            subcirc_ref (str): reference to use for the base of the internal elements</span>
<span class="sd">            prim_turns (int; 1; None): the number of turns on the primary port </span>
<span class="sd">                of the transformer must be an int &gt;=1</span>
<span class="sd">            </span>
<span class="sd">            sec_turns (int; 1; None): the number of turns on the primary port </span>
<span class="sd">                of the transformer must be an int &gt;=1</span>
<span class="sd">            </span>
<span class="sd">            parallel (bool; True): If True will put the primary and secondary ports</span>
<span class="sd">                in parallel dot configuration else will put them in anti- parallel config</span>
<span class="sd">            </span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        TODO:</span>
<span class="sd">            -really investigate the anti parrel config to make sure it&#39;s working</span>
<span class="sd">                as it&#39;s supposed to</span>

<span class="sd">    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subcirc_ref</span><span class="o">=</span><span class="n">subcirc_ref</span>
        
        <span class="k">assert</span> <span class="n">prim_turns</span><span class="o">&gt;=</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">sec_turns</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;turns must be &gt;= 1&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prim_turns</span><span class="o">=</span><span class="n">prim_turns</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sec_turns</span><span class="o">=</span><span class="n">sec_turns</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="o">=</span><span class="n">parallel</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">core_specs</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">core_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                   <span class="n">H_array</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">B_array</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                   <span class="n">area</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> 
                   <span class="n">input_domain</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> 
                   <span class="n">fraction</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                   <span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
                   <span class="n">in_low</span><span class="o">=-</span><span class="mf">7.0</span><span class="p">,</span> <span class="n">in_high</span><span class="o">=</span><span class="mf">7.0</span><span class="p">,</span>
                   <span class="n">hyst</span><span class="o">=</span><span class="mf">2.3</span><span class="p">,</span> <span class="n">out_lower_limit</span><span class="o">=-</span><span class="mf">2.5e-4</span><span class="p">,</span>
                   <span class="n">out_upper_limit</span><span class="o">=</span><span class="mf">2.5e-4</span><span class="p">,</span>
                  <span class="c1">#tried to make it look like the table in the ngspice manual</span>
                  <span class="n">make_plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access method to set all the core properties, if `make_plot` is true </span>
<span class="sd">        will produce a plot of the BH curve</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        (see assertions in code below for each inputs constraints)</span>
<span class="sd">        (default values are taken from the two examples in ngspice 32 12.2.19,</span>
<span class="sd">        not from the default values in `core`&#39;s docs )</span>
<span class="sd">        </span>
<span class="sd">            H_array (np.array/None; None; ATurns/m): array for the core&#39;s main BH curve H values</span>
<span class="sd">             if None will use default in the ngspice 32 manual examples in 12.2.19;</span>
<span class="sd">             used only in pwl mode</span>
<span class="sd">            </span>
<span class="sd">            B_array (np.array/None; None; T):array for the core&#39;s main BH curve B values</span>
<span class="sd">             if None will use default in the ngspice 32 manual examples in 12.2.19; </span>
<span class="sd">             used only in pwl mode</span>
<span class="sd">            </span>
<span class="sd">            area (float; 0.01; m^2): the cross-section area of the core such that the flux</span>
<span class="sd">                will be \psi=B *A where A is the area and B is the B part of the BH curve; </span>
<span class="sd">                used only in pwl mode</span>
<span class="sd">                </span>
<span class="sd">            length (float; 0.01; m): length of the core will scall the io mmf such that</span>
<span class="sd">            H=mmf/L where H is the H part of the BH curve, mmf is the IO mmf and L is the length; </span>
<span class="sd">            used only in pwl mode</span>
<span class="sd">            </span>
<span class="sd">            input_domain (float; 0.01; ?): docs are not clear what this is</span>
<span class="sd">            </span>
<span class="sd">            fraction (bool; True): if True apply smoothing to the BH curve vs nearest value in BH curve array</span>
<span class="sd">            </span>
<span class="sd">            mode (int; 1): if `1` use a pwl model of the core else `2` use a hysteresis model</span>
<span class="sd">            </span>
<span class="sd">            in_low (float; -7.0; ?): input low value, ?; used only when using hysteresis mode</span>
<span class="sd">            </span>
<span class="sd">            in_high (float; 7.0; ?): input high value, ?; used only when using hysteresis mode</span>
<span class="sd">            </span>
<span class="sd">            hyst (float; 2.3; ?): hysteresis, ?; used only when using hysteresis mode</span>
<span class="sd">            </span>
<span class="sd">            out_lower_limit (float; -2.5e-4; ?): ouput lower limit. ? ; used only when using hysteresis </span>
<span class="sd">            </span>
<span class="sd">            out_upper_limit (float; 2.5e-4; ?): ouput upper limit, ? ; used only when using hysteresis </span>
<span class="sd">            </span>
<span class="sd">            make_plot (bool; False): if True create a plot of the BH curve and</span>
<span class="sd">                returns that plots axis</span>
<span class="sd">            </span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            create atriputes of XSPICE core parmaters like `self.*_V` that </span>
<span class="sd">            hold the parmter value to pass to the core instaince in `self.SKiDl`.</span>
<span class="sd">            If `make_plot` is True will create plot of BH curve and retrun it&#39;s axis</span>
<span class="sd">            </span>
<span class="sd">        </span>
<span class="sd">        TODO:</span>
<span class="sd">            - beef up the docs about the hysteresis from a source other then the ngspice manual</span>
<span class="sd">            - beef up the plots</span>
<span class="sd">        </span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">H_array</span><span class="o">==</span><span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">B_array</span><span class="o">==</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">assert</span> <span class="p">(</span><span class="n">H_array</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">B_array</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;Both H &amp; B must be None or equal np.arrays&#39;</span>
            <span class="n">H_array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="o">-</span><span class="mi">375</span><span class="p">,</span> <span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="o">-</span><span class="mi">188</span><span class="p">,</span> <span class="o">-</span><span class="mi">125</span><span class="p">,</span> <span class="o">-</span><span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">375</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
            <span class="n">B_array</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">3.13e-3</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.63e-3</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.33e-3</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.93e-3</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.5e-3</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.25e-4</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.5e-4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">2.5e-4</span><span class="p">,</span> <span class="mf">6.25e-4</span><span class="p">,</span> <span class="mf">1.5e-3</span><span class="p">,</span> <span class="mf">1.93e-3</span><span class="p">,</span> <span class="mf">2.33e-3</span><span class="p">,</span> <span class="mf">2.63e-3</span><span class="p">,</span> <span class="mf">3.13e-3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">H_array</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">generic</span><span class="p">)</span> <span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">H_array</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">generic</span><span class="p">)</span> <span class="p">),</span> <span class="s1">&#39;Both H &amp; B must be None or eual np.arrays&#39;</span>
        
        <span class="k">assert</span> <span class="p">(</span><span class="n">H_array</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="n">B_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">H_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">H_array</span><span class="o">.</span><span class="n">ndim</span><span class="o">==</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;H and B arrays must be eual 1 dim arrays&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">H_array_V</span><span class="o">=</span><span class="n">H_array</span><span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">B_array_V</span><span class="o">=</span><span class="n">B_array</span>  
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">area</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;area must be a float &gt;=0&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area_V</span><span class="o">=</span><span class="n">area</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">length</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;length must be a float &gt;=0&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length_V</span><span class="o">=</span><span class="n">length</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_domain</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">input_domain</span><span class="o">&gt;=</span><span class="mf">1e-12</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">input_domain</span><span class="o">&lt;=</span><span class="mf">0.5</span><span class="p">),</span> <span class="s1">&#39;input_domain must be a float &gt;=1e-12 and &lt;=0.5&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_domain_V</span><span class="o">=</span><span class="n">input_domain</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fraction</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span> <span class="s1">&#39;fraction must be a bool&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fraction_V</span><span class="o">=</span><span class="n">fraction</span>
        
        <span class="k">assert</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;mode is a control value 1:pwl, 2:hyst; only&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_V</span><span class="o">=</span><span class="n">mode</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_low</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">in_low</span><span class="o">&lt;</span><span class="n">in_high</span><span class="p">),</span> <span class="s1">&#39;in_low must be a float less then in_high&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">in_low_V</span><span class="o">=</span><span class="n">in_low</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_high</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">in_low</span><span class="o">&lt;</span><span class="n">in_high</span><span class="p">),</span> <span class="s1">&#39;in_high must be a float greater then in_low&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">in_high_V</span><span class="o">=</span><span class="n">in_high</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hyst</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">hyst</span><span class="o">&gt;</span><span class="mf">0.0</span><span class="p">),</span> <span class="s1">&#39;hyst must be a float greater than 0&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hyst_V</span><span class="o">=</span><span class="n">hyst</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out_lower_limit</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">out_lower_limit</span><span class="o">&lt;</span><span class="n">out_upper_limit</span><span class="p">),</span> <span class="s1">&#39;out_lower_limit must be a float less then in_high&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out_lower_limit_V</span><span class="o">=</span><span class="n">out_lower_limit</span>
        
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out_upper_limit</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">out_lower_limit</span><span class="o">&lt;</span><span class="n">out_upper_limit</span><span class="p">),</span> <span class="s1">&#39;out_upper_limit must be a float less then out_lower_limit&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out_upper_limit_V</span><span class="o">=</span><span class="n">out_upper_limit</span>
        
        
        <span class="k">if</span> <span class="n">make_plot</span><span class="p">:</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">H_array_V</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">B_array_V</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span> <span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Main BH Curve&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;magfield_H_[ATurns/m]&#39;</span><span class="p">);</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;flux_density_B_[T]&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">);</span> <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcirc_ref</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">subcirc_ref</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;B-H Curve for Transfomer </span><span class="si">{title}</span><span class="s1">&#39;</span><span class="p">)</span>
            
            <span class="k">return</span> <span class="n">ax</span>
    <span class="nd">@subcircuit</span>
    <span class="k">def</span> <span class="nf">SKiDl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term_0</span><span class="p">,</span> <span class="n">term_1</span><span class="p">,</span> <span class="n">term_2</span><span class="p">,</span> <span class="n">term_3</span><span class="p">,</span> <span class="n">return_elements</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Terminals:</span>
<span class="sd">        term_0, term_1, term_2, term_3</span>
<span class="sd">        </span>
<span class="sd">        Terminals are defined via:</span>
<span class="sd">        ```</span>
<span class="sd">        Left_(prime)Termanals - Transformer - Right_(sec)Termanals</span>
<span class="sd">                    (dot)   +--core--+  (dot if parallel)</span>
<span class="sd">        Postive V_i   term_0-|0 || 2|-term_2     Postive V_o</span>
<span class="sd">        Negtive V_i   term_1-|1 || 3|-term_3     Negtive V_o</span>
<span class="sd">                             +------+ (dot if anti-parallel) </span>
<span class="sd">        ```</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            return_internls (bool; False): If True return out the internal Voltage Source,</span>
<span class="sd">                and Resistance objects in this package</span>
<span class="sd">        Returns:</span>
<span class="sd">            Returns elements to circuit RC lowpass filter part element object and if `return_internls`</span>
<span class="sd">            is True will return the internal voltage and resistance objects in that order </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Creating an XSPICE part using the SPICE abbreviation &#39;A&#39;.</span>
        <span class="c1">#Createing the primary side</span>
        <span class="n">prim</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span>
            <span class="n">io</span><span class="o">=</span><span class="s2">&quot;io1, io2, mmf1, mmf2&quot;</span><span class="p">,</span>  <span class="c1">#io1 &amp; io2 \in port`l` and `mmf1` &amp; `mmf2` \in port `mmf_out`</span>
            <span class="n">model</span><span class="o">=</span><span class="n">XspiceModel</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;prim_</span><span class="si">{self.subcirc_ref}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lcouple&quot;</span><span class="p">,</span>
                <span class="n">num_turns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">prim_turns</span>
            <span class="p">),</span>
        <span class="p">)</span>
        
        <span class="c1">#creating the secondary side</span>
        <span class="n">sec</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span>
            <span class="n">io</span><span class="o">=</span><span class="s2">&quot;io1, io2, mmf1, mmf2&quot;</span><span class="p">,</span> 
            <span class="n">model</span><span class="o">=</span><span class="n">XspiceModel</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;sec_</span><span class="si">{self.subcirc_ref}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lcouple&quot;</span><span class="p">,</span>
                <span class="n">num_turns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sec_turns</span>
            <span class="p">),</span>
        <span class="p">)</span>
        
        <span class="c1">#connect the &quot;inductors&quot; to the outside world</span>
        <span class="c1">#the lcouples did not like having their ports named just 1, 2</span>
        <span class="n">prim</span><span class="p">[</span><span class="s1">&#39;io1&#39;</span><span class="p">,</span> <span class="s1">&#39;io2&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">term_0</span><span class="p">,</span> <span class="n">term_1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="n">sec</span><span class="p">[</span><span class="s1">&#39;io1&#39;</span><span class="p">,</span> <span class="s1">&#39;io2&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">term_2</span><span class="p">,</span> <span class="n">term_3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sec</span><span class="p">[</span><span class="s1">&#39;io2&#39;</span><span class="p">,</span> <span class="s1">&#39;io1&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">term_2</span><span class="p">,</span> <span class="n">term_3</span>
        
        
        <span class="c1">#instatnint the core</span>
        <span class="n">core</span><span class="o">=</span><span class="n">A</span><span class="p">(</span>
            <span class="n">io</span><span class="o">=</span><span class="s2">&quot;top, bot&quot;</span><span class="p">,</span> <span class="c1">#couldnt think of a better i/o name </span>
            <span class="n">model</span><span class="o">=</span><span class="n">XspiceModel</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;core_</span><span class="si">{self.subcirc_ref}</span><span class="s1">&#39;</span><span class="p">,</span>
                <span class="s1">&#39;core&#39;</span><span class="p">,</span>
                <span class="n">H_array</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">H_array_V</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                <span class="n">B_array</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">H_array_V</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                <span class="n">area</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">area_V</span><span class="p">,</span>
                <span class="n">length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">length_V</span><span class="p">,</span>
                <span class="n">input_domain</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_domain_V</span><span class="p">,</span>
                <span class="n">fraction</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fraction_V</span><span class="p">,</span>
                <span class="n">mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mode_V</span><span class="p">,</span>
                <span class="n">in_low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">in_low_V</span><span class="p">,</span>
                <span class="n">in_high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">in_high_V</span><span class="p">,</span>
                <span class="n">hyst</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hyst_V</span><span class="p">,</span>
                <span class="n">out_lower_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_lower_limit_V</span><span class="p">,</span>
                <span class="n">out_upper_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">out_upper_limit_V</span>

            <span class="p">)</span>
        <span class="p">)</span>
        
        
        <span class="c1">#connect the core to the mmf control i/o for the lcoupled inductors</span>
        <span class="c1">#direct connect of the `mmfs`&#39;s together yield singular matrix, gnd should be fine</span>
        <span class="n">prim</span><span class="p">[</span><span class="s1">&#39;mmf1&#39;</span><span class="p">,</span> <span class="s1">&#39;mmf2&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">core</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">],</span> <span class="n">gnd</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="n">sec</span><span class="p">[</span><span class="s1">&#39;mmf1&#39;</span><span class="p">,</span> <span class="s1">&#39;mmf2&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">core</span><span class="p">[</span><span class="s1">&#39;bot&#39;</span><span class="p">],</span> <span class="n">gnd</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sec</span><span class="p">[</span><span class="s1">&#39;mmf2&#39;</span><span class="p">,</span> <span class="s1">&#39;mmf1&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">core</span><span class="p">[</span><span class="s1">&#39;bot&#39;</span><span class="p">],</span> <span class="n">gnd</span>
    
    <span class="k">def</span> <span class="nf">lcapy_self</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        leaving off all the lcapy stuff since it won&#39;t do anti parral config</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="parallel-primary-and-seconday-configeration">
<h2>Parallel Primary and Seconday configeration<a class="headerlink" href="#parallel-primary-and-seconday-configeration" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">transformer</span><span class="o">=</span><span class="n">basic_xspice_transformer</span><span class="p">(</span><span class="n">prim_turns</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sec_turns</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#dont change any core prop, but make the plot </span>
<span class="n">transformer</span><span class="o">.</span><span class="n">core_specs</span><span class="p">(</span><span class="n">make_plot</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_86_0.png" src="../_images/AC_3_CoupledMag_86_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">);</span> <span class="n">net_out</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>


<span class="c1">#conenct the subcircuit</span>
<span class="n">transformer</span><span class="o">.</span><span class="n">SKiDl</span><span class="p">(</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span><span class="p">,</span> <span class="n">net_out</span><span class="p">,</span> <span class="n">gnd</span><span class="p">)</span>

<span class="c1">#create a load</span>
<span class="n">rload</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">100</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">load_amm</span><span class="o">=</span><span class="n">V</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;amm_load&#39;</span><span class="p">,</span> <span class="n">dc_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">rload</span> <span class="o">&amp;</span> <span class="n">load_amm</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="n">circ</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">(</span><span class="n">libs</span><span class="o">=</span><span class="s2">&quot;SpiceLib&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pin A1/0/io1/UNSPECIFIED True
Pin A1/1/io2/UNSPECIFIED True
Pin A1/2/mmf1/UNSPECIFIED True
Pin A1/3/mmf2/UNSPECIFIED True
Pin A2/0/io1/UNSPECIFIED True
Pin A2/1/io2/UNSPECIFIED True
Pin A2/2/mmf1/UNSPECIFIED True
Pin A2/3/mmf2/UNSPECIFIED True
Pin A3/0/top/UNSPECIFIED True
Pin A3/1/bot/UNSPECIFIED True
.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
A1 In 0 N_2 0 prim_None
A2 Out 0 N_3 0 sec_None
A3 N_2 N_3 core_None
Rload In N_4 100Ohm
Vamm_load N_4 0 0
.model prim_None lcouple (num_turns=2)
.model sec_None lcouple (num_turns=5)
.model core_None core (B_array=[-1000, -500, -375, -250, -188, -125, -63, 0, 63, 125, 188, 250, 375, 500, 1000] H_array=[-1000, -500, -375, -250, -188, -125, -63, 0, 63, 125, 188, 250, 375, 500, 1000] area=0.01 fraction=True hyst=2.3 in_high=7.0 in_low=-7.0 input_domain=0.01 length=0.01 mode=1 out_lower_limit=-0.00025 out_upper_limit=0.00025)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_sim</span><span class="o">=</span><span class="n">ac_ease</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">trans_sim</span><span class="o">.</span><span class="n">ac_sweep_setup</span><span class="p">(</span><span class="mi">10</span><span class="nd">@u_Hz</span><span class="p">,</span> <span class="mi">1</span><span class="nd">@u_GHz</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;decade&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">trans_sim</span><span class="o">.</span><span class="n">do_ac_sim</span><span class="p">()</span>
<span class="n">trans_sim</span><span class="o">.</span><span class="n">ac_resultsNB_DF</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10 Hz</td>
      <td>1 GHz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;N_1_[V]&#39;, &#39;In_[V]&#39;, &#39;N_2_[V]&#39;, &#39;Out_[V]&#39;, &#39;N_3_[V]&#39;, &#39;N_4_[V]&#39;,
       &#39;V1_[A]&#39;, &#39;Vamm_load_[A]&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_data</span><span class="o">=</span><span class="n">ac_representation_tool</span><span class="p">(</span><span class="n">trans_sim</span><span class="o">.</span><span class="n">ac_resultsNB_DF</span><span class="p">)</span>
<span class="n">par_data</span><span class="o">.</span><span class="n">make_mag_phase</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/iridium/anaconda3/lib/python3.7/site-packages/pandas/core/series.py:726: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;N_1_[V][dB]&#39;, &#39;In_[V][dB]&#39;, &#39;N_2_[V][dB]&#39;, &#39;Out_[V][dB]&#39;,
       &#39;N_3_[V][dB]&#39;, &#39;N_4_[V][dB]&#39;, &#39;V1_[A][dB]&#39;, &#39;Vamm_load_[A][dB]&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">par_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
                               <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;In_[V][dB]&#39;</span><span class="p">],</span> <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;In_[V][deg]&#39;</span><span class="p">],</span>
                              <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Par Currents&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;Out_[V][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>
<span class="n">axphase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;Out_[V][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span> <span class="n">axphase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_91_0.png" src="../_images/AC_3_CoupledMag_91_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">par_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
                               <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span>
                              <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Par Currents&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;Vamm_load_[A][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>
<span class="n">axphase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">par_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;Vamm_load_[A][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span> <span class="n">axphase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_92_0.png" src="../_images/AC_3_CoupledMag_92_0.png" />
</div>
</div>
</div>
<div class="section" id="anti-parallel-primary-and-secondary-configuration">
<h2>Anti-Parallel Primary and Secondary configuration<a class="headerlink" href="#anti-parallel-primary-and-secondary-configuration" title="Permalink to this headline">¶</a></h2>
<p>Need to verify this better with a transient simulation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">transformer</span><span class="o">=</span><span class="n">basic_xspice_transformer</span><span class="p">(</span><span class="n">prim_turns</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sec_turns</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reset</span><span class="p">()</span>
<span class="c1">#create the nets</span>
<span class="n">net_in</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;In&#39;</span><span class="p">);</span> <span class="n">net_out</span><span class="o">=</span><span class="n">Net</span><span class="p">(</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="c1">#create a 1V AC test source and dummy R and attache to nets</span>
<span class="n">vs</span><span class="o">=</span><span class="n">SINEV</span><span class="p">(</span><span class="n">ac_magnitude</span><span class="o">=</span><span class="mi">1</span><span class="nd">@u_V</span><span class="p">)</span>
<span class="n">rdummy</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">vs</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">rdummy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">gnd</span>
<span class="n">rdummy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+=</span><span class="n">net_in</span>


<span class="c1">#conenct the subcircuit</span>
<span class="n">transformer</span><span class="o">.</span><span class="n">SKiDl</span><span class="p">(</span><span class="n">net_in</span><span class="p">,</span> <span class="n">gnd</span><span class="p">,</span> <span class="n">net_out</span><span class="p">,</span> <span class="n">gnd</span><span class="p">)</span>

<span class="c1">#create a load</span>
<span class="n">rload</span><span class="o">=</span><span class="n">R</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">100</span><span class="nd">@u_Ohm</span><span class="p">)</span>
<span class="n">load_amm</span><span class="o">=</span><span class="n">V</span><span class="p">(</span><span class="n">ref</span><span class="o">=</span><span class="s1">&#39;amm_load&#39;</span><span class="p">,</span> <span class="n">dc_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">net_in</span> <span class="o">&amp;</span> <span class="n">rload</span> <span class="o">&amp;</span> <span class="n">load_amm</span> <span class="o">&amp;</span> <span class="n">gnd</span>

<span class="n">circ</span><span class="o">=</span><span class="n">generate_netlist</span><span class="p">(</span><span class="n">libs</span><span class="o">=</span><span class="s2">&quot;SpiceLib&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pin A1/0/io1/UNSPECIFIED True
Pin A1/1/io2/UNSPECIFIED True
Pin A1/2/mmf1/UNSPECIFIED True
Pin A1/3/mmf2/UNSPECIFIED True
Pin A2/0/io1/UNSPECIFIED True
Pin A2/1/io2/UNSPECIFIED True
Pin A2/2/mmf1/UNSPECIFIED True
Pin A2/3/mmf2/UNSPECIFIED True
Pin A3/0/top/UNSPECIFIED True
Pin A3/1/bot/UNSPECIFIED True
.title 
V1 N_1 0 DC 0V AC 1V 0.0rad SIN(0V 1V 50Hz 0s 0Hz)
Rdummy N_1 In 0Ohm
A1 In 0 N_2 0 prim_None
A2 0 Out 0 N_3 sec_None
A3 N_2 N_3 core_None
Rload In N_4 100Ohm
Vamm_load N_4 0 0
.model prim_None lcouple (num_turns=2)
.model sec_None lcouple (num_turns=5)
.model core_None core (B_array=[-1000, -500, -375, -250, -188, -125, -63, 0, 63, 125, 188, 250, 375, 500, 1000] H_array=[-1000, -500, -375, -250, -188, -125, -63, 0, 63, 125, 188, 250, 375, 500, 1000] area=0.01 fraction=True hyst=2.3 in_high=7.0 in_low=-7.0 input_domain=0.01 length=0.01 mode=1 out_lower_limit=-0.00025 out_upper_limit=0.00025)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No errors or warnings found during netlist generation.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_sim</span><span class="o">=</span><span class="n">ac_ease</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">trans_sim</span><span class="o">.</span><span class="n">ac_sweep_setup</span><span class="p">(</span><span class="mi">10</span><span class="nd">@u_Hz</span><span class="p">,</span> <span class="mi">1</span><span class="nd">@u_GHz</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;decade&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">trans_sim</span><span class="o">.</span><span class="n">do_ac_sim</span><span class="p">()</span>
<span class="n">trans_sim</span><span class="o">.</span><span class="n">ac_resultsNB_DF</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Start_freq</th>
      <th>Stop_Freq</th>
      <th>SamplingInc</th>
      <th>StepType</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10 Hz</td>
      <td>1 GHz</td>
      <td>20</td>
      <td>decade</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;N_1_[V]&#39;, &#39;In_[V]&#39;, &#39;N_2_[V]&#39;, &#39;Out_[V]&#39;, &#39;N_3_[V]&#39;, &#39;N_4_[V]&#39;,
       &#39;V1_[A]&#39;, &#39;Vamm_load_[A]&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">antipar_data</span><span class="o">=</span><span class="n">ac_representation_tool</span><span class="p">(</span><span class="n">trans_sim</span><span class="o">.</span><span class="n">ac_resultsNB_DF</span><span class="p">)</span>
<span class="n">antipar_data</span><span class="o">.</span><span class="n">make_mag_phase</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/iridium/anaconda3/lib/python3.7/site-packages/pandas/core/series.py:726: RuntimeWarning: divide by zero encountered in log10
  result = getattr(ufunc, method)(*inputs, **kwargs)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;N_1_[V][dB]&#39;, &#39;In_[V][dB]&#39;, &#39;N_2_[V][dB]&#39;, &#39;Out_[V][dB]&#39;,
       &#39;N_3_[V][dB]&#39;, &#39;N_4_[V][dB]&#39;, &#39;V1_[A][dB]&#39;, &#39;Vamm_load_[A][dB]&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">par_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
                               <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;In_[V][dB]&#39;</span><span class="p">],</span> <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;In_[V][deg]&#39;</span><span class="p">],</span>
                              <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Anti-Par Voltages&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;Out_[V][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>
<span class="n">axphase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;Out_[V][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span> <span class="n">axphase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_99_0.png" src="../_images/AC_3_CoupledMag_99_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_plot</span><span class="o">=</span><span class="n">eecomplex_plot_templets</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">]</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">par_plot</span><span class="o">.</span><span class="n">bode_plot_two_templet</span><span class="p">(</span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> 
                               <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][dB]&#39;</span><span class="p">],</span> <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;V1_[A][deg]&#39;</span><span class="p">],</span>
                              <span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">axmag</span><span class="p">,</span> <span class="n">axphase</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Anti-Par Currents&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="p">[</span><span class="s1">&#39;Vamm_load_[A][dB]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>
<span class="n">axphase</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_mag_DF</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">antipar_data</span><span class="o">.</span><span class="n">ac_sim_phase_DF</span><span class="p">[</span><span class="s1">&#39;Vamm_load_[A][deg]&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Out&#39;</span><span class="p">)</span>

<span class="n">axmag</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span> <span class="n">axphase</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/AC_3_CoupledMag_100_0.png" src="../_images/AC_3_CoupledMag_100_0.png" />
</div>
</div>
</div>
<div class="section" id="autotransformer">
<h2>Autotransformer<a class="headerlink" href="#autotransformer" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="isolation">
<h2>Isolation<a class="headerlink" href="#isolation" title="Permalink to this headline">¶</a></h2>
<p>https://www.allaboutcircuits.com/technical-articles/transformer-isolation/</p>
<div class="section" id="test-bench-type">
<h3>Test Bench Type<a class="headerlink" href="#test-bench-type" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="medical-type">
<h3>Medical Type<a class="headerlink" href="#medical-type" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="multi-winding">
<h2>Multi Winding<a class="headerlink" href="#multi-winding" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="cinter-tapped">
<h2>Cinter-tapped<a class="headerlink" href="#cinter-tapped" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="current-transformer">
<h2>Current Transformer<a class="headerlink" href="#current-transformer" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="y-delta-converters">
<h2>Y-Delta Converters<a class="headerlink" href="#y-delta-converters" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<div class="section" id="citations">
<h1>Citations<a class="headerlink" href="#citations" title="Permalink to this headline">¶</a></h1>
<p>[1] ALL ABOUT ELECTRONICS. “Self Inductance and Mutual Inductance Explained,” YouTube, Feb 12, 2017. [Video file]. Available: https://youtu.be/hoTInTKij0o. [Accessed: Jul 18, 2021].</p>
<p>[2] ALL ABOUT ELECTRONICS. “Dot Convention in Magnetically Coupled Circuits,” YouTube, Feb 18, 2017. [Video file]. Available: https://youtu.be/sILgO4sQmRs. [Accessed: Jul 18, 2021].</p>
<p>[3] ALL ABOUT ELECTRONICS. “Mutually Coupled Inductors in Series (Derivation / Proof and Examples),” YouTube, Apr 21, 2017. [Video file]. Available: https://youtu.be/49OL_3L7BFA. [Accessed: Jul 18, 2021].</p>
<p>[4] ALL ABOUT ELECTRONICS. “Mutually Coupled Inductors in Parallel (Derivation / Proof and Examples),” YouTube, Apr 24, 2017. [Video file]. Available: https://youtu.be/NacczEJj_iI. [Accessed: Jul 18, 2021].</p>
<p>[5] B. Razavi, “The Bridged T-Coil [A Circuit for All Seasons]”, IEEE Solid-State Circuits Magazine, vol. 7, no. 4, pp. 9-13, 2015. Available: 10.1109/mssc.2015.2474258 [Accessed 27 January 2021] or https://www.seas.ucla.edu/brweb/papers/Journals/BRFall15TCoil.pdf [Accessed: Jul 18, 2021].</p>
<p>[6] Jordan Edmunds. “Bridged T Coil Analysis Part 1 ,” YouTube, Feb 23, 2018. [Video file]. Available: https://youtu.be/-kSSMOAhlwU. [Accessed: Jul 18, 2021].</p>
<p>[7] Jordan Edmunds. “Bridged T Coil Analysis Part 2 ,” YouTube, Feb 23, 2018. [Video file]. Available: https://youtu.be/vr2oYehKC8Q. [Accessed: Jul 18, 2021].</p>
<p>[8] Vogt, M. Hendrix and P. Nenzi, Ngspice User’s Manual Version 32 (Describes ngspice release version), 32nd ed. 2020, Chapter 12: Mixed-Mode and Behavioral Modeling with XSPICE.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./AC_2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="AC_2_RCL_filters.html" title="previous page">Basic Passive Filters</a>
    <a class='right-next' id="next-link" href="AC_4_PZ.html" title="next page">What is PZ anylsis</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Steven K Armour (PyLCARS)<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>